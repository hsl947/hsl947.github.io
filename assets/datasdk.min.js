var dataSDK=function(){function e(e,t){for(var n={},i=0;i<t.length;i++){var o=new RegExp("(^|&)"+t[i]+"=([^&]*)(&|$)"),r=e.match(o),a="";null!=r&&(a=decodeURIComponent(r[2])),n[t[i]]=a}return n}function t(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.src=e;try{var n=document.getElementsByTagName("script").fiboDataSDK;n.parentNode.insertBefore(t,n)}catch(i){console.log("引用斐波SDK的script标签id必须为fiboDataSDK")}}function n(e,n,i,a){var s=T;s=o(s,"appId",i||O.pfid),s=o(s,"pageId",a||O.appid),"true"===O.debug&&(s=o(s,"debug","true")),s=o(s,"sui",N.sui),s=o(s,"cnl",N.cnl);var c={eventType:e,eventTime:(new Date).getTime()};r(n)&&(c.eventArgs=n),b.push(c),s=o(s,"rpEventList",JSON.stringify(b)),s=o(s,"referrer",encodeURIComponent(document.referrer));var d=D.get("rp");null==d&&(d=""),s=o(s,"rp",d);var l=D.get("ext");if(null==l&&(l=""),s=o(s,"ext",l),s=o(s,"url",encodeURIComponent(location.href)),"unload"===e||"exit"===e){var u=new Image;return u.src=s,void(b=[])}s=o(s,"callback","dataSDK.logCb"),t(s),b=[]}function i(){var e=C,n=D.get("rp");null==n&&(n=""),e=o(e,"rp",n);var i=D.get("ext");null==i&&(i=""),e=o(e,"callback","dataSDK.checkIdCb"),t(e)}function o(e,t,n){return void 0!=n&&null!=n||(n=""),-1!=e.indexOf("?")||-1!=e.indexOf("=")?e+"&"+t+"="+n:e+"?"+t+"="+n}function r(e){return null===e||"object"!=typeof e?!1:!Object.keys||0!==Object.keys(e).length}function a(){var e,t=8,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[],o=n.length;for(e=0;t>e;e++)i[e]=n[0|Math.random()*o];return i.join("")}function s(e){r(e)&&n("userinfo",e)}function c(e,t){return void 0===t&&(t="1"),e.data?void n("formInfo",{formInfo:e}):void(r(e)&&n("formInfo",{formInfo:{data:e,version:t}}))}function d(e){if(r(e)){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;e.idno&&t.test(e.idno)&&(e.idno=""),e.gender&&/^(0|1|2)$/.test(e.gender)&&(e.gender="0"),n("idInfo",{name:e.name,phone:e.phone,addr:e.addr,idno:e.idno,gender:e.gender})}}function l(e){var t=/^[1][34578]\d{9}$/;if("string"==typeof e||t.test(e)){var i={phone:e};n("setphone",i)}}function u(e){var t=e||location.href;try{var n="";if(-1!=t.indexOf("#")){var i=t.split("#");n=i[1],t=i[0]}var r=N.lc,s="",c=N.cnl;return r=""===r?1:parseInt(r,10)+1,(isNaN(r)||0===r)&&(r=1),s=D.get("rp"),null===s&&(s=a(),D.add("rp",s,1e4)),t=-1!=t.indexOf("lc=")?t.replace(/lc=\d{1,5}/,"lc="+r):o(t,"lc",r),t=-1!=t.indexOf("sui=")?t.replace(/sui=[a-zA-Z0-9]{8}/,"sui="+s):o(t,"sui",s),""!==c&&-1===t.indexOf("cnl=")&&(t=o(t,"cnl",c)),""!=n&&(t+="#"+n),t}catch(d){return e}}function g(e){var t=(new Date).getTime()-I,i={staytm:t,useragent:A.device};/^(timeline|friend|qq|txweibo|qzone)$/.test(e)&&(i.shareType=e),n("share",i)}function p(e,t,i){if(!(isNaN(e)||isNaN(t)||isNaN(i)||0>=e||0>=t||0>=i||e>i||t>i||e==t)){var o=(new Date).getTime(),r=o-I;if(I=o,!(0>r)){var a={ctp:e,tgp:t,ttp:i,staytm:r};n("switchpage",a)}}}function f(e){var t={};void 0===e||isNaN(e)||0>e||(t={currentPage:e}),n("exit",t)}function m(e,t){var i=e.replace(/[#&]/g,"_"),o=t.replace(/[#&]/g,"_");if(n("linkclick",{btname:i,remark:o}),event&&"A"===event.target.tagName&&/^http/.test(event.target.href)){var r=event.target.href;event.preventDefault(),setTimeout(function(){location.href=r},200)}}function v(e){if(200===e.retCode){var t=e.rp,n=e.ext;""!==t&&"null"!==t&&D.add("rp",t,1e4),""!==n&&"null"!==n&&D.add("ext",n,1e4)}}function h(e){if(200===e.retCode){var t=e.rp,i=e.ext;if(""!==t&&"null"!==t&&D.add("rp",t,1e4),"true"!==O.blext)return void n("view",S);if(""===i||"null"===i||"undefined"===i||void 0===i){var o="http://col.fibodata.com/weixin/callback?surl="+encodeURIComponent(window.location.href),r=encodeURIComponent(o);return void(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx94ec6057d5a4a719&redirect_uri="+r+"&response_type=code&scope=snsapi_base&state=#wechat_redirect")}D.add("ext",i,1e4),n("view",S)}}function w(e){if("[object Array]"===toString.call(e)){var t=encodeURIComponent(e.toString());n("tag",{tags:t})}}function x(e,t){n("view",S,e,t)}var S,b=[],I=0,y=(new Date).getTime(),T="http://col.fibodata.com/logdataservlet",C="http://col.fibodata.com/tolog/gaindata",D={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")),n=window.localStorage||!1;return null!=t&&(t=t[2],n&&window.localStorage.setItem(e,t)),null===t&&n&&(t=window.localStorage.getItem(e),null!=t&&D.add(e,t,1e4)),t?decodeURIComponent(t):null},add:function(e,t,n){var i=e+"="+encodeURIComponent(t)+";";if(0!=n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i+="expires="+o.toGMTString()}i+=";path=/",document.cookie=i,window.localStorage&&window.localStorage.setItem(e,t)}},N=function(){var t=window.location.search.substr(1),n=["lc","sui","cnl","debug","from"],i=e(t,n);return i}(),O=function(){var t=document.getElementById("fiboDataSDK").src.split("?")[1],n=["pfid","appid","blext","debug","auth"];return e(t,n)}(),R=window.screen.width||0,P=window.screen.height||0,k=window.devicePixelRatio||0,A=function(){var e=window.navigator&&window.navigator.userAgent;if(!e)return{};var t=/MicroMessenger/i.test(e),n="";t&&(n="Weixin"),/Weibo/i.test(e)&&(n="Weibo"),/Qzone/i.test(e)&&(n="Qzone"),/QQ\/\d/i.test(e)&&(n="QQ"),/NewsArticle/i.test(e)&&(n="NewsArticle");var i="";if("Weixin"===n||"QQ"===n){var o=navigator.userAgent.match(/NetType\/[a-z0-9A-Z_]+/);null!==o&&(i=o[0].split("/")[1])}var r="pc";/iPhone/i.test(e)&&(r="iphone"),/(iPad|iPod)/i.test(e)&&(r="ipad"),/Android/i.test(e)&&(r="android"),/Windows Phone/i.test(e)&&(r="WP");var a,s,c="",d="";if("android"===r){try{a=/(Linux(.)*\) )/.exec(e)[0].split(";"),s=a[a.length-1],s=s.split(")")[0].substr(1),c=s,d=s}catch(l){}c=function(e){return/GT-|SM-|SCH-/gi.test(e)?"samsung":/HM|RedMi|Mi/gi.test(e)?"xiaomi":/huawei|honor/gi.test(e)?"Huawei":/vivo/gi.test(e)?"vivo":/Meitu/gi.test(e)?"Meitu":/OPPO|R6|R7|R8/gi.test(e)?"OPPO":/Coolpad|SK1/gi.test(e)?"Coolpad":/ASUS/gi.test(e)?"ASUS":/ZTE/gi.test(e)?"ZTE":/HTC/gi.test(e)?"HTC":/Sony/gi.test(e)?"Sony":/Lenovo/gi.test(e)?"Lenovo":/NX5/gi.test(e)?"nubia":/m([0-9cx]{1,4})/gi.test(e)||/PRO 5/g.test(e)?"meizu":e}(c);var u,g=d.search("Build");-1!==g&&(u=d.substr(0,g)),u&&(u=u.replace(/^[\s\t ]+|[\s\t ]+$/g,""),c===d&&(c=u))}else"iphone"===r&&(c="iphoneOther",320===R&&(480===P&&(c=2===k?"iphone4x":"iphoneOther"),568===P&&(c="iphone5x")),375===R&&(c="iphone6x"),414===R&&(c="iphone6xp"));return{isWeixin:t,appSrc:n,netType:i,device:r,model:c,mdetail:u||""}}(),U=Math.max(R,P)*k<=2560?(window.screen.width||0)*(window.devicePixelRatio||0)+"x"+(window.screen.height||0)*(window.devicePixelRatio||0):(window.screen.width||0)+"x"+(window.screen.height||0);sessionStorage?""!==N.lc||""!==N.cnl||""!==N.sui?(sessionStorage.setItem("lc",N.lc),sessionStorage.setItem("sui",N.sui),sessionStorage.setItem("cnl",N.cnl),sessionStorage.setItem("from",N.from)):(N.lc=sessionStorage.getItem("lc")||"",N.sui=sessionStorage.getItem("sui")||"",N.cnl=sessionStorage.getItem("cnl")||"",N.from=sessionStorage.getItem("from")||""):""!==N.lc||""!==N.cnl?(D.add("lc",N.lc),D.add("sui",N.sui),D.add("cnl",N.cnl),D.add("from",N.from)):(N.lc=D.get("lc")||"",N.sui=D.get("sui")||"",N.cnl=D.get("cnl")||"",N.from=D.get("from")||""),"null"===N.lc&&(N.lc=""),"null"===N.cnl&&(N.cnl=""),"null"===N.sui&&(N.sui=""),N.cnl.length>20&&(N.cnl=N.cnl.substr(0,20)),S={isWeixin:A.isWeixin,useragent:A.device,lc:parseInt(N.lc,10)||0,shareType:N.from,netType:A.netType,appSrc:A.appSrc,screen:U,model:A.model,mdetail:A.mdetail},"groupmessage"!==S.shareType&&"singlemessage"!==S.shareType&&"timeline"!==S.shareType&&(S.shareType="");var M="true"===O.auth;A.isWeixin&&M&&""===S.shareType&&(S.shareType="gzh");var W=document.referrer;return-1==W.indexOf("mp.weixin.qq.com")&&-1==W.indexOf("mp.weixinbridge.com")||(S.shareType="gzh"),I=(new Date).getTime(),A.isWeixin&&"true"===O.blext?i():n("view",S),window.addEventListener&&window.addEventListener("unload",function(){n("unload",{staytm:(new Date).getTime()-y})},!1),{pushView:x,pushUserInfo:s,saveFormInfo:c,dealUrl:u,preShareUrl:u,share:g,switchPage:p,exitPage:f,btnClick:m,saveCellPhone:l,pushTags:w,logCb:v,checkIdCb:h,pushIdentity:d}}();