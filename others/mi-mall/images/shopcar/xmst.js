(function(){var x="prototype",m=Math,domain_id="",uid="",vars=[],version="1.4.10";function getDomain(){var host=window.location.hostname;var host_ary=host.split(".");size=host_ary.length;var domain="."+host_ary[size-2]+"."+host_ary[size-1];return domain}function getLanguage(){return navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage}function getVendor(){return navigator.vendor}function getPlatform(){return navigator.platform}function getScreen(){return screen.width+"*"+screen.height}function _setCookie(name,value,domain,expires){var size=arguments.length;if(size==3){document.cookie=name+"="+value+";path=/;domain="+domain}else{document.cookie=name+"="+value+";path=/;domain="+domain+";expires="+expires}}function getCookie(name){var cookie=document.cookie;var s=removeBlanks(cookie);var pairs=s.split(";");for(var i=0;i<pairs.length;i++){var pairSplit=pairs[i].split("=");if(pairSplit.length>1&&pairSplit[0]==name){return pairSplit[1]}}return""}function removeBlanks(s){var temp="";for(var i=0;i<s.length;i++){var c=s.charAt(i);if(c!=" "){temp+=c}}return temp}function getRandomNum(){return m.round(2147483647*m.random())}function setCookie(name,value){var d=new Date;d.setTime(d.getTime()+360*24*60*60*1e3);var newCookie=name+"="+value+";"+"path=/;domain="+getDomain()+";expires="+d.toGMTString();window.document.cookie=newCookie}function getRefDomain(ref){var l=document.createElement("a");l.href=ref;return l.hostname}function getMstuid(){var d=new Date;var mstuid=d.getTime()+"_"+Math.round(Math.random()*1e4);return mstuid}function getVars(){var varParam="";if(vars==[]){return""}for(var varName in vars){varParam+="&"+varName+"="+encodeURIComponent(vars[varName])}return varParam}function creatScript(url){var o=document.createElement("script");o.type="text/javascript";o.async=true;o.src=url;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(o,s)}function getBaseParam(){var uri=document.location.href.replace(/&/g,"|");var ref=document.referrer.replace(/&/g,"|");ref=ref.toLowerCase();if(ref){var refDomain=getRefDomain(ref);var l=getCookie("lastsource");if(l){_setCookie("lastsource",l,getDomain())}if(refDomain.indexOf(".mi.com")<0||refDomain.indexOf("s1.mi.com")>-1||refDomain.indexOf("p.www.xiaomi.com")>-1||refDomain.indexOf("a.union.mi.com")>-1)_setCookie("lastsource",refDomain,getDomain())}var phpsessid=getCookie("xm_www_sid");var mstuid=getCookie("mstuid");var muuid=getCookie("muuid");var mucid=getCookie("mucid");var mutid=getCookie("mutid");var mstz=getCookie("mstz")||"";if(mstz===""||mstz.split("|").length<3){var mstz_array=[];mstz_array[0]="";mstz_array[1]="";mstz_array[2]=getRandomNum().toString()+"."+0;var name="mstz";var value=mstz_array.join("|");_setCookie(name,value,getDomain())}mstz=getCookie("mstz");var mstz_ary=mstz.split("|")||[];var old=mstz_ary.length==4?0:1;var mstprevpid=mstz_ary[0]||"";var prevtarget=mstz_ary[1]||"";var sessionId_arry=[];sessionId_arry=mstz_ary[2].split(".");var sessionId=sessionId_arry[0];var step=parseInt(sessionId_arry[1])+1;mstz_ary[2]=sessionId_arry[0]+"."+step.toString();var mstprev_pid_loc=mstz_ary[3]||"";var pu=mstz_ary[4]||"";var gu=mstz_ary[5]||"";var reflesh=0;var enRef=encodeURIComponent(ref);if(enRef==""){pu="";gu=""}if(enRef!=pu&&uri!=ref){gu=pu;pu=enRef}else if(enRef!=""){reflesh=1}mstz_ary[3]=mstprev_pid_loc;mstz_ary[4]=pu;mstz_ary[5]=gu;_setCookie("mstz",mstz_ary.join("|"),getDomain());var lastsource=getCookie("lastsource");var new_visitor=0;var d=new Date;d.setTime(d.getTime()+2*360*24*60*60*1e3);if(mstuid===""){new_visitor=1;mstuid=getMstuid()}_setCookie("mstuid",mstuid,getDomain(),d.toGMTString());var param="";var d2=new Date;if(vars["curl"]===undefined||vars["curl"]==""){vars["curl"]=location.href}else{vars["curl"]=vars["curl"]}vars["xmv"]=getVistor(mstuid);vars["v"]=version;if(vars["vuuid"]===undefined){vars["vuuid"]=uuid(16,32)}param="mid="+getCookie("userId")+"&phpsessid="+phpsessid+"&mstuid="+mstuid+"&muuid="+muuid+"&mucid="+mucid+"&sessionId="+sessionId+"&step="+step+"&new_visitor="+new_visitor+"&mstprevpid="+encodeURIComponent(mstprevpid)+"&mstprev_pid_loc="+mstprev_pid_loc+"&prevtarget="+prevtarget+"&lastsource="+lastsource+"&timestamp="+d2.getTime()+"&ref="+enRef+"&domain="+getDomain()+"&screen="+getScreen()+"&language="+getLanguage()+"&vendor="+getVendor()+"&platform="+getPlatform()+"&gu="+gu+"&pu="+pu+"&rf="+reflesh+"&mutid="+mutid+"&muwd="+encodeURIComponent(getCookie("muwd"));return param}function uuid(len,radix){var chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var uuid=[],i;radix=radix||chars.length;if(len){for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix]}else{var r;uuid[8]=uuid[13]=uuid[18]=uuid[23]="-";uuid[14]="4";for(i=0;i<36;i++){if(!uuid[i]){r=0|Math.random()*16;uuid[i]=chars[i==19?r&3|8:r]}}}return uuid.join("")}function getVistor(mstuid){var v=getCookie("xm_vistor");var getNew=true;var vistor="";var ctime=0;var now=(new Date).getTime();if(v!==""){var vs=v.split("-");if(vs.length==2){vistor=vs[0];ctime=vs[1];if(now-ctime<=1e3*60*30){getNew=false}}}if(getNew){vistor=mstuid+"_"+now}ctime=now;_setCookie("xm_vistor",vistor+"-"+ctime,getDomain());return vistor}function performanceTime(){var b=window.performance||window.webkitPerformance,b=b&&b.timing;if(!b)return"";var c=b.navigationStart;var a=[];a["ldns"]=b.domainLookupEnd-b.domainLookupStart;a["con"]=b.connectEnd-b.connectStart;a["res"]=b.responseStart-b.requestStart;a["down"]=b.responseEnd-b.responseStart;a["redi"]=b.fetchStart-c;var varParam="";for(var varName in a){varParam+="&"+varName+"="+a[varName]}return varParam}function sendData(url){creatScript(url)}function isFun(f){return"function"==typeof f}var msf=function(){this.p=[]};var M=msf[x];var regex=/^AA\d+$/;var itemRegx="(http|https)://item.mi.com/([0-9]+).html.*";itemRegx=new RegExp(itemRegx);var statid=new Object;M.trackPerformance=function(args){var baseParam=getBaseParam();_mi_ti=args[0];var a=[];if("undefined"!=typeof _mi_ti){if("undefined"!=typeof _mi_ti.fs){a["fs"]=_mi_ti.fs}if("undefined"!=typeof _mi_ti.ws){a["ws"]=_mi_ti.ws}if("undefined"!=typeof _mi_ti.ua){a["ua"]=_mi_ti.ua}if("undefined"!=typeof _mi_ti.td){a["td"]=_mi_ti.td}}var varParam=getVars();for(var varName in a){varParam+="&"+varName+"="+a[varName]}sendData(url+baseParam+varParam+"&type=performance")},M.trackJSError=function(args){var baseParam=getBaseParam();_mi_je=args[0];var a=[];if("undefined"!=typeof _mi_je){if("undefined"!=typeof _mi_je.ec){a["ec"]=_mi_je.ec}if("undefined"!=typeof _mi_je.us){a["us"]=_mi_je.us}}var varParam=getVars();for(var varName in a){varParam+="&"+varName+"="+a[varName]}sendData(url+baseParam+varParam+"&type=jserror")},M.trackPanelShow=function(args){if(args.length<2)return;var id=args[0];var type=encodeURIComponent(args[1]);var idElement=document.getElementById(id);if("undefined"!=typeof idElement&&idElement!=null){try{var as=idElement.getElementsByTagName("a");var log="";var baseParam=getBaseParam()+getVars();var n=0;for(var i=0;i<as.length;i++){var dsp=as[i].getAttribute("data-stat-pid");var dsa=as[i].getAttribute("data-stat-aid");if(dsp!=null&&dsa!=null){var aurl=as[i].getAttribute("href");var stat=dsa+"+"+dsp;if("undefined"==typeof statid[stat]){if(itemRegx.test(aurl)){var d=itemRegx.exec(aurl);if("object"==typeof d&&d.length>=3){aurl=d[2]}}log+=dsa+"+"+dsp+"+"+aurl+";";n++;statid[stat]=1;if(n%20==0&&log!=""){sendData(url+baseParam+"&type=sp&spt="+type+"&log="+encodeURIComponent(log));log=""}}}}if(log!=""){sendData(url+baseParam+"&type=sp&spt="+type+"&log="+encodeURIComponent(log))}}catch(err){}}},M.trackPageView=function(){checkAnalytics();var baseParam=getBaseParam();varParam=getVars();var pParam=performanceTime();sendData(url+baseParam+pParam+varParam);var d=new Date;var currT=encodeURIComponent(window.location.href);d.setTime(d.getTime()+3*60*1e3);_setCookie("msttime",currT,getDomain(),d.toGMTString());d.setTime(d.getTime()-2*60*1e3);_setCookie("msttime1",currT,getDomain(),d.toGMTString())},M.push=function(args){if(isFun(args[0])){args[0](args.slice(1));return}M[args[0]](args.slice(1))},M.setDomainId=function(args){vars["domain_id"]=args[0]},M.setUid=function(args){vars["uid"]=args[0]},M.setVars=function(args){vars[args[0]]=args[1]},M.getDomainId=function(){return vars["domain_id"]},M.getVars=function(args){return vars[args]},M.trackEvent=function(args){var category="",pid="",src="",pid_loc="",old_pid="",combine_pid="";var d2=new Date;var mstz=getCookie("mstz").split("|")||[];var mstprevpid="",prevtarget="",sessionId="",mstprev_pid_loc="",flag=0;if(mstz.length>=3){mstprevpid=mstz[0];prevtarget=mstz[1];sessionId=mstz[2].split(".")[0]||getRandomNum().toString()+"."+0}var old=args.length==4?1:0;if(old){category=args[1];old_pid=args[2];src=encodeURIComponent(args[3]);if(mstprevpid!=old_pid){mstz[0]=old_pid;flag=1}}else{pid=args[0];src=encodeURIComponent(args[1]);pid_loc=args[2];mstz[0]=pid;mstprev_pid_loc=mstz[3]||"";if(mstprev_pid_loc!=pid_loc){mstz[3]=pid_loc;flag=1}var sessionId_arry=[];sessionId_arry=mstz[2].split(".");sessionId=sessionId_arry[0]}var d2=new Date;var phpsessid=getCookie("xm_www_sid");if(prevtarget!=src){mstz[1]=src;flag=1}if(flag){_setCookie("mstz",mstz.join("|"),getDomain())}var param="mid="+getCookie("userId")+"&phpsessid="+phpsessid+"&mstuid="+getCookie("mstuid")+"&sessionId="+sessionId+"&muuid="+getCookie("muuid")+"&mucid="+getCookie("mucid")+"&mstprevpid="+mstprevpid+"&lastsource="+getCookie("lastsource")+"&timestamp="+d2.getTime()+"&domain="+getDomain()+"&screen="+getScreen()+"&language="+getLanguage()+"&vendor="+getVendor()+"&platform="+getPlatform();var paramNew="";if(old){paramNew="mstpid="+old_pid+"&"+param+"&target="+src+"&prevtarget="+prevtarget+"&category="+category}else{paramNew="mstpid="+encodeURIComponent(pid)+"&"+param+"&target="+src+"&prevtarget="+prevtarget+"&pid_loc="+pid_loc+"&mstprev_pid_loc="+mstprev_pid_loc}var varParam=getVars();sendData(url+paramNew+varParam)};function loadScript(s,callback){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;script=document.createElement("script");script.async="async";script.src=s;script.onload=script.onreadystatechange=function(){if(!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script)}script=undefined;callback()}};head.insertBefore(script,head.firstChild)}var unAnalyticsHost=new Array("http://service.order.mi.com/cservice","http://me.mi.com","https://service.order.mi.com/cservice","https://me.mi.com");var domainArray=new Array(100,101,129);function checkAnalytics(){var md5id="";if(in_array(vars["domain_id"],domainArray)){var host=window.location.href;var isAnalytics=true;for(var i=0;i<unAnalyticsHost.length&&isAnalytics;i++){if(-1!=host.indexOf(unAnalyticsHost[i])){isAnalytics=false}}if(isAnalytics){md5id=getPcid();var now=new Date;var loadStatData=function(){creatScript("//c1.mifile.cn/f/i/15/stat/js/jquery.statData.min.js?d="+now.getFullYear()+(now.getMonth()+1)+now.getDate())};if(typeof jQuery=="undefined"){loadScript("//s01.mifile.cn/js/lib/jquery.min.js",loadStatData)}else{loadStatData()}}}vars["pageid"]=md5id;return vars["pageid"]}function in_array(search,array){for(var i in array){if(array[i]==search){return true}}return false}function getPcid(){var RePath=/\/(index.php|index.html|index.htm|index)$/,protocol=location.protocol+"//",host=location.host,pathname=location.pathname.replace(RePath,"/");var pagePath=protocol+host+pathname;return md5("undefined"!=typeof _STAT_HASHNAME&&""!=_STAT_HASHNAME?_STAT_HASHNAME:pagePath)}(function($){"use strict";function safe_add(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function binl_md5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=md5_ff(a,b,c,d,x[i],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd)}return[b,c]}function binl2rstr(input){var i,output="";for(i=0;i<input.length*32;i+=8){output+=String.fromCharCode(input[i>>5]>>>i%32&255)}return output}function rstr2binl(input){var i,output=[];output[(input.length>>2)-1]=undefined;for(i=0;i<output.length;i+=1){output[i]=0}for(i=0;i<input.length*8;i+=8){output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32}return output}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),s.length*8))}function rstr_hmac_md5(key,data){var i,bkey=rstr2binl(key),ipad=[],opad=[],hash;ipad[15]=opad[15]=undefined;if(bkey.length>16){bkey=binl_md5(bkey,key.length*8)}for(i=0;i<16;i+=1){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}hash=binl_md5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binl_md5(opad.concat(hash),512+128))}function rstr2hex(input){var hex_tab="0123456789abcdef",output="",x,i;for(i=0;i<input.length;i+=1){x=input.charCodeAt(i);output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(x&15)}return output}function str2rstr_utf8(input){return unescape(encodeURIComponent(input))}function raw_md5(s){return rstr_md5(str2rstr_utf8(s))}function hex_md5(s){return rstr2hex(raw_md5(s))}function raw_hmac_md5(k,d){return rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d))}function hex_hmac_md5(k,d){return rstr2hex(raw_hmac_md5(k,d))}function md5(string,key,raw){if(!key){if(!raw){return hex_md5(string)}return raw_md5(string)}if(!raw){return hex_hmac_md5(key,string)}return raw_hmac_md5(key,string)}window.md5=md5;if(typeof define==="function"&&define.amd){define(function(){return md5})}else{$.md5=md5}})(this);var url="//a.stat.xiaomi.com/js/mstr.js?";var _msf=new msf;_msf.p=window._msq;if("undefined"!==typeof window._msq){for(i=0;i<_msf.p.length;i++){_msf.push(_msf.p[i])}}window._msq=_msf;if(vars["domain_id"]==100||vars["domain_id"]==101){creatScript("//c1.mifile.cn/f/i/15/stat/js/unjcV2.js")}})();